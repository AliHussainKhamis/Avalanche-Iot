<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your Devices</title>
  <link rel="stylesheet" href="/styles.css">
  
</head>
<body>

  <!-- Top navigation -->
  <div style="display: flex; justify-content: space-between; align-items: center;">
  
    <h1>Your Devices</h1>
    <a href="/logout">Logout</a>
  </div>

  <% if (user && user.profilePic) { %>
  <div>
    <img src="<%= user.profilePic %>" alt="Profile Picture" width="100" style="border-radius: 50%;">
    <p>Welcome, <%= user.name %></p>
  </div>
<% } %>

  <!-- Add new device -->
  <a href="/device/new">âž• Add Device</a>

  <!-- Device list -->
  <ul>
    <% allDevices.forEach(device => { %>  
      <li>
        <h2><strong><%= device.name %></strong></h2>  
        <p><strong>Description:</strong> <%= device.description %></p>

        <!-- Actions -->
        <a href="/device/<%= device._id %>">Details</a> | 
        <a href="/device/<%= device._id %>/edit">Edit</a>
        <a href="/device/<%= device._id %>/control">Control</a>
        <form action="/device/<%= device._id %>?_method=DELETE" method="POST" style="display:inline;">
          <button type="submit" onclick="return confirm('Are you sure you want to delete this device?')">Delete</button>
        </form>
      </li>
      <hr>
    <% }) %>
  </ul>

</body>
</html>
